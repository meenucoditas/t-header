<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../app-layout/app-layout.html">
<link rel="import" href="../paper-icon-button/paper-icon-button.html">
<link rel="import" href="../iron-icons/iron-icons.html">
<link rel="import" href="../paper-menu/paper-menu.html">
<link rel="import" href="../paper-item/paper-item.html">
<link rel="import" href="../paper-button/paper-button.html">
<link rel="import" href="../paper-dropdown-menu/paper-dropdown-menu.html">
<link rel="import" href="../iron-icons/maps-icons.html">
<link rel="import" href="../iron-media-query/iron-media-query.html">
<link rel="import" href="../paper-menu/paper-submenu.html">
<!--<link rel="import" href="../iron-demo-helpers/demo-pages-shared-styles.html">-->
<!--
`t-header`
Polymer Header Demo ds

### Styling

The following custom properties and mixins are available for styling:
Apply all changes of custom css properties inside t-header{} in style tag

Custom property | Description | Default
----------------|-------------|----------
`--header-display` | Header display | `block`
`--header-height` | Header Height | `60px`
`--header-background` | Header Background | `#4387d2`
`--header-padding` | Header Padding | `10px`
`--logo-label-display` | Header Label display | `-webkit-inline-box`
`--logo-label-color` | Header Label color | `white`
`--header-flex` | Header flex | `flex`
`--header-flex-width` | Header Flex width | `100%`
`--label-logo-component-flex` | Header Logo and name flex | `2`
`--travel-options-component-flex` | Travel Options Flex | `3`
`--account-options-component-flex` | Account Options Flex | `1`
`--account-options-margin-top` | Account Options Flex | `5px`
`--travel-options-icon-color` | Travel icons color | `white`
`--travel-options-icon-height` | Travel icons Height | `20px`
`--travel-options-label-color` | Travel labels color | `white`
`--travel-options-label-fontsize` | Travel labels font size | `18px`
`--sign-inup-label` | Sign in/up label color | `white`
`--account-dropdown-label` | Account Options Label | `white`
`--account-dropdown-align` | Account Options alignment | `center`
`--account-dropdown-icon-color` | Account Dropdown icon color | `white`
`--menu-icon-color` | Menu Icon color | `white`
`--opened-drawer-bgcolor` | Opened Drawer Background color | `#4387d2`
`--drawer-options-bgcolor` | Opened Drawer Background color | `#4387d2`
`--invert-sidebar-image-color` | Invert Color of sidebar Images | `invert(1)`
`--sidebar-image-margin-right` | right margin for sidebar images  | `10px`
`--header-menu-traveloptions-display` | Display for header menu travel options  | `inline`
`--header-menu-traveloptions-padding` | Padding for header menu travel options  | `10px`
`--header-menu-traveloptions-background` | Background for header menu travel options  | `none`
`--travel-options-selected-item-bgcolor` | Background of Selected Travel Option  | `#56A5EC`
`--useraccount-dropdown-input-underline-display` | Display for Dropdown Input Container | `none`
`--useraccount-dropdown-input-underline-focused-display` |  Display on click of Dropdown| `none`
@demo demo/index.html
-->
<dom-module id="t-header">
	<template>
		<style is="custom-style" include="demo-pages-shared-styles">
		/* Custom Css*/
			:host {
				display: var(--header-display, block);
				height: var(--header-height, 60px);
				background: var(--header-background,#4387d2);
				padding: var(--header-padding,10px);
			}

			.labels {
				display: var(--logo-label-display, -webkit-inline-box);
				color:var(--logo-label-color,white);
			}
			.flex-horizontal-with-ratios {
				display: var(--header-flex,flex);
				width:var(--header-flex-width,100%);
			}
			.flexchild1 {
				flex:var(--label-logo-component-flex,2);
			}
			.flexchild2 {
				flex:var(--travel-options-component-flex,3);
			}
			.flexchild3 {
				flex:var(--account-options-component-flex,1);
				margin-top: var(--account-options-margin-top,5px);
			}
			[hidden] {
				display: none !important;
			}
			.travelOptionsIconColor{
				color: var(--travel-options-icon-color,white);
				height: var(--travel-options-icon-height,20px);
			}
			.travelOptionsLabel{
				color: var(--travel-options-label-color,white);
				font-size:var(--travel-options-label-fontsize,18px);
			}
			.signInUp{
				color:var(--sign-inup-label,white);
			}
			paper-dropdown-menu.accountOptions {
				--paper-input-container-label: {
					color: var(--account-dropdown-label,white);
					text-align: var(--account-dropdown-align,center);
				};
				--paper-dropdown-menu-icon: {
					color: var(--account-dropdown-icon-color,white);
				};
			}
			.sideMenuIcon{
				color: var(--menu-icon-color,white);
			}
			@media (max-width: 1200px){
				app-header-layout[has-scrolling-region]{
					width: auto;
				}
			}
			@media (max-width: 768px){
				body{
					height: 700px;
				}
			}
			@media (max-width: 460px){
				.logInWrap{
					flex: 0.3;
				}
				.signInUp{
					display: none;
				}
			}
			.sideBarOptionsImage{
				-webkit-filter: var(--invert-sidebar-image-color,invert(1));
				margin-right: var(--sidebar-image-margin-right,10px);
			}
			paper-menu.centerMenuTravelOptions{
				background: var(--header-menu-traveloptions-background,none);
			}
			paper-item.options{
				display: var(--header-menu-traveloptions-display,inline);
				padding: var(--header-menu-traveloptions-padding,10px);
			}
			paper-menu{
				--paper-menu-selected-item:{
					background: var(--travel-options-selected-item-bgcolor,#56A5EC);
				}
			}
			paper-dropdown-menu{
				--paper-input-container-underline:{
					display: var(--useraccount-dropdown-input-underline-display,none);
				};
				--paper-input-container-underline-focus:{
					display:var(--useraccount-dropdown-input-underline-focused-display,none);
				};
			}
		</style>
		<app-drawer-layout force-narrow>
			<app-drawer id="drawer">
				<paper-menu selected="{{selectedOptionValue}}" attr-for-selected="value">
					<!--<paper-listbox selected="{{selectedOptionValue}}" attr-for-selected="value">-->
						<template is="dom-repeat" items="[[travelOptions]]">
							<paper-item name="{{item.name}}" on-tap="_openPage" value="{{item.name}}">
								<img src="{{item.imageUrl}}" class="sideBarOptionsImage">
								{{item.name}}
							</paper-item>
						</template>
					<!--</paper-listbox>-->
				</paper-menu>

				<paper-menu attr-for-item-title="label" multi>
					<paper-submenu label="paper-menu">
						<paper-item class="menu-trigger">
							<img src="{{userAccountImageUrl}}" class="sideBarOptionsImage">
							[[userAccountLabel]]
						</paper-item>
						<paper-menu class="menu-content sublist" multi>
							<template is="dom-repeat" items="[[userAccountOptions]]">
								<paper-item name="{{item.name}}" on-tap="_openPage" value="{{item.name}}">{{item.name}}</paper-item>
							</template>
						</paper-menu>
					</paper-submenu>
				</paper-menu>
			</app-drawer>
			<app-header-layout has-scrolling-region>
				<app-header reveals effects="waterfall">
					<app-toolbar hidden$="{{wideLayout}}">
						<div class="flexchild1">
							<paper-icon-button icon="menu" drawer-toggle class="sideMenuIcon"></paper-icon-button>
							<template is="dom-if" if="{{logoUrl}}">
								<img src="{{logoUrl}}">
							</template>
							<template is="dom-if" if="{{headerLabel}}">
								<div class="labels">{{headerLabel}}</div>
							</template>
						</div>
						<div class="flexchild2 logInWrap">
							<template is="dom-if" if="{{userAccountImageUrl}}">
								<img src="{{userAccountImageUrl}}">
							</template>
							<template is="dom-if" if="{{signInUpLinkLabel}}">
								<a class="signInUp" is="pushstate-anchor" href="/">{{signInUpLinkLabel}}</a>
							</template>
						</div>
					</app-toolbar>
					<app-toolbar  hidden$="{{!wideLayout}}">
						<div class="container flex-horizontal-with-ratios">
							<div class="flexchild1">
								<template is="dom-if" if="{{logoUrl}}">
									<img src="{{logoUrl}}">
								</template>
								<template is="dom-if" if="{{headerLabel}}">
									<div class="labels">{{headerLabel}}</div>
								</template>
							</div>
							<div class="flexchild2">
								<template is="dom-if" if="{{travelOptions}}">
									<paper-menu selected="{{selectedOptionValue}}" attr-for-selected="value" class="centerMenuTravelOptions">
										<template is="dom-repeat" items="[[travelOptions]]">
											<paper-item name="{{item.name}}" on-tap="_openPage" value="{{item.name}}" class="options">
												<img src="{{item.imageUrl}}" class="travelOptionsIconColor">
												<span class="travelOptionsLabel">{{item.name}}</span>
											</paper-item>
										</template>
									</paper-menu>
								</template>
							</div>
							<div class="flexchild3">
								<template is="dom-if" if="{{userAccountOptions}}">
									<paper-dropdown-menu label="[[userAccountLabel]]" class="accountOptions"  noink no-animations no-label-float="true" hidden$="{{userAccountLabel == '' || userAccountLabel == undefined}}">
										<!--<paper-menu class="dropdown-content">-->
											<paper-listbox class="dropdown-content" layered="true">
												<template is="dom-repeat" items="[[userAccountOptions]]">
													<paper-item name="{{item.name}}" on-tap="_openPage" value="{{item.name}}">{{item.name}}</paper-item>
												</template>
											</paper-listbox>
										<!--</paper-menu>-->
									</paper-dropdown-menu>
								</template>
							</div>
						</div>
					</app-toolbar>
				</app-header>
			</app-header-layout>
		</app-drawer-layout>
		<iron-media-query query="min-width: 768px" query-matches="{{wideLayout}}"></iron-media-query>
	</template>
	<script>
		Polymer({

			is: 't-header',

			properties: {
				logoUrl:{
					type:String
				},
				userAccountOptions: {
					type: Array
				},
				travelOptions: {
					type: Array
				},
				userAccountLabel:{
					type:String
				},
				headerLabel:{
					type:String
				},
				signInUpLinkLabel:{
					type:String
				},

				loginLabel:{
					type:String
				},
				signUpLabel:{
					type:String
				},
				_loginLabel:{
					type:Boolean,
					value:false,
					notify: true
				},
				loginLabel:{
					type:String
				},
				userAccountImageUrl:{
					type:String
				},
				selectedOptionValue: {
					type: String,
					observer: 'getValue',
					notify: true,
					value:''
				}
			},
			getValue: function(newValue, oldValue) {
				/*Do nothing for now*/
			},
			onLayoutChange: function(wide) {
				var drawer = this.$.drawer;
				if (wide && drawer.opened) {
					drawer.opened = false;
				}
			},

			attached: function() {
				this.loginChildCount = this.queryEffectiveChildren('.login');
				if(this.loginChildCount === undefined || this.loginChildCount === 'undefined'){
					this._loginLabel = true;
				}
			},

			_openPage: function(e){
				this.setAttribute("selected",true);
				window.open(e.model.get('item.url'));
			}
		});
	</script>
</dom-module>
